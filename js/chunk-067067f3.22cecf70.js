(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-067067f3"],{"4d71":function(e,t,a){"use strict";a.r(t);var o=a("7a23"),c={class:"container",style:{"margin-top":"70px"}},l={class:"text-end"},n={class:"table mt-4"},r=Object(o["createElementVNode"])("thead",null,[Object(o["createElementVNode"])("tr",null,[Object(o["createElementVNode"])("th",{width:"120"},"分類"),Object(o["createElementVNode"])("th",null,"產品名稱"),Object(o["createElementVNode"])("th",{width:"120"},"原價"),Object(o["createElementVNode"])("th",{width:"120"},"售價"),Object(o["createElementVNode"])("th",{width:"100"},"是否啟用"),Object(o["createElementVNode"])("th",{width:"120"},"編輯")])],-1),d={key:0,class:"text-success"},i={key:1},s={class:"btn-group"},m=["onClick"],p=["onClick"];function b(e,t,a,b,u,f){var h=Object(o["resolveComponent"])("Pagination"),j=Object(o["resolveComponent"])("ProductModal"),O=Object(o["resolveComponent"])("DelModal");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",c,[Object(o["createElementVNode"])("div",l,[Object(o["createElementVNode"])("button",{class:"btn btn-primary",onClick:t[0]||(t[0]=function(e){return f.openModal("add")})}," 建立新的產品 ")]),Object(o["createElementVNode"])("table",n,[r,Object(o["createElementVNode"])("tbody",null,[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(u.products,(function(e){return Object(o["openBlock"])(),Object(o["createElementBlock"])("tr",{key:e.id},[Object(o["createElementVNode"])("td",null,Object(o["toDisplayString"])(e.category),1),Object(o["createElementVNode"])("td",null,Object(o["toDisplayString"])(e.title),1),Object(o["createElementVNode"])("td",null,Object(o["toDisplayString"])(e.origin_price),1),Object(o["createElementVNode"])("td",null,Object(o["toDisplayString"])(e.price),1),Object(o["createElementVNode"])("td",null,[e.is_enabled?(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",d,"啟用")):(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",i,"未啟用"))]),Object(o["createElementVNode"])("td",null,[Object(o["createElementVNode"])("div",s,[Object(o["createElementVNode"])("button",{type:"button",class:"btn btn-outline-primary btn-sm",onClick:function(t){return f.openModal("edit",e)}}," 編輯 ",8,m),Object(o["createElementVNode"])("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:function(t){return f.openModal("del",e)}}," 刪除 ",8,p)])])])})),128))])]),Object(o["createVNode"])(h,{pages:u.pages,onEmitPages:f.getData},null,8,["pages","onEmitPages"]),Object(o["createVNode"])(j,{ref:"productModal",tmpProd:u.tmpProd,isNew:u.isNew,onUpdate:f.getData},null,8,["tmpProd","isNew","onUpdate"]),Object(o["createVNode"])(O,{ref:"delModal",tmpProd:u.tmpProd,onDelItem:f.delProd},null,8,["tmpProd","onDelItem"])])}var u=a("5530"),f=(a("99af"),a("4dcd")),h=a("1799"),j=(a("a4d3"),a("e01a"),{id:"productModal",ref:"modal",class:"modal fade",tabindex:"-1","aria-labelledby":"productModalLabel","aria-hidden":"true"}),O={class:"modal-dialog modal-xl"},g={class:"modal-content border-0"},V=Object(o["createElementVNode"])("div",{class:"modal-header bg-dark text-white"},[Object(o["createElementVNode"])("h5",{id:"productModalLabel",class:"modal-title"},[Object(o["createElementVNode"])("span",null,"新增產品")]),Object(o["createElementVNode"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),v={class:"modal-body"},N={class:"row"},E={class:"col-sm-4"},x={class:"mb-5"},w=Object(o["createElementVNode"])("h5",null,"主要圖片",-1),D={class:"mb-3"},M=Object(o["createElementVNode"])("label",{for:"imageUrl",class:"form-label"},"圖片網址：",-1),y=["src"],k={key:0,class:"mb-2"},B=Object(o["createElementVNode"])("h5",null,"附加圖片",-1),U={for:"imageUrl",class:"form-label"},P=["onUpdate:modelValue"],H=["src"],_=["onClick"],T={class:"col-sm-8"},C={class:"mb-3"},$=Object(o["createElementVNode"])("label",{for:"title",class:"form-label"},"標題",-1),G={class:"row"},q={class:"mb-3 col-md-6"},A=Object(o["createElementVNode"])("label",{for:"category",class:"form-label"},"分類",-1),W={class:"mb-3 col-md-6"},Y=Object(o["createElementVNode"])("label",{for:"price",class:"form-label"},"單位",-1),S={class:"row"},F={class:"mb-3 col-md-6"},L=Object(o["createElementVNode"])("label",{for:"origin_price",class:"form-label"},"原價",-1),I={class:"mb-3 col-md-6"},J=Object(o["createElementVNode"])("label",{for:"price",class:"form-label"},"售價",-1),X=Object(o["createElementVNode"])("hr",null,null,-1),z={class:"mb-3"},K=Object(o["createElementVNode"])("label",{for:"description",class:"form-label"},"產品描述",-1),Q={class:"mb-3"},R=Object(o["createElementVNode"])("label",{for:"content",class:"form-label"},"說明內容",-1),Z={class:"mb-3"},ee={class:"form-check"},te=Object(o["createElementVNode"])("label",{class:"form-check-label",for:"is_enabled"},"是否啟用",-1),ae={class:"modal-footer"},oe=Object(o["createElementVNode"])("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function ce(e,t,a,c,l,n){var r;return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",j,[Object(o["createElementVNode"])("div",O,[Object(o["createElementVNode"])("div",g,[V,Object(o["createElementVNode"])("div",v,[Object(o["createElementVNode"])("div",N,[Object(o["createElementVNode"])("div",E,[Object(o["createElementVNode"])("div",x,[w,Object(o["createElementVNode"])("div",D,[M,Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{type:"text",class:"form-control",placeholder:"請輸入圖片連結","onUpdate:modelValue":t[0]||(t[0]=function(e){return l.prodData.imageUrl=e})},null,512),[[o["vModelText"],l.prodData.imageUrl]]),Object(o["createElementVNode"])("img",{src:l.prodData.imageUrl,class:"img-fluid",alt:""},null,8,y)])]),0!=(null===(r=l.prodData.imagesUrl)||void 0===r?void 0:r.length)?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",k,[B,(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(l.prodData.imagesUrl,(function(e,t){return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",{class:"mb-5",key:t},[Object(o["createElementVNode"])("label",U,"附圖 "+Object(o["toDisplayString"])(t+1)+" - 圖片網址：",1),Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{type:"text",class:"form-control",placeholder:"請輸入圖片連結","onUpdate:modelValue":function(e){return l.prodData.imagesUrl[t]=e}},null,8,P),[[o["vModelText"],l.prodData.imagesUrl[t]]]),Object(o["createElementVNode"])("img",{src:l.prodData.imagesUrl[t],class:"img-fluid",style:{margin:"5px 0px"},alt:""},null,8,H),Object(o["createElementVNode"])("button",{class:"btn btn-outline-danger btn-sm d-block w-100",onClick:function(e){return n.delPicture(t)}}," 刪除此張附圖 ",8,_)])})),128))])):Object(o["createCommentVNode"])("",!0),Object(o["createElementVNode"])("div",null,[Object(o["createElementVNode"])("button",{class:"btn btn-outline-primary btn-sm d-block w-100",onClick:t[1]||(t[1]=function(){return n.addPicture&&n.addPicture.apply(n,arguments)})}," 新增附圖 ")])]),Object(o["createElementVNode"])("div",T,[Object(o["createElementVNode"])("div",C,[$,Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{id:"title",type:"text",class:"form-control",placeholder:"請輸入標題","onUpdate:modelValue":t[2]||(t[2]=function(e){return l.prodData.title=e})},null,512),[[o["vModelText"],l.prodData.title]])]),Object(o["createElementVNode"])("div",G,[Object(o["createElementVNode"])("div",q,[A,Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{id:"category",type:"text",class:"form-control",placeholder:"請輸入分類","onUpdate:modelValue":t[3]||(t[3]=function(e){return l.prodData.category=e})},null,512),[[o["vModelText"],l.prodData.category]])]),Object(o["createElementVNode"])("div",W,[Y,Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{id:"unit",type:"text",class:"form-control",placeholder:"請輸入單位","onUpdate:modelValue":t[4]||(t[4]=function(e){return l.prodData.unit=e})},null,512),[[o["vModelText"],l.prodData.unit]])])]),Object(o["createElementVNode"])("div",S,[Object(o["createElementVNode"])("div",F,[L,Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{id:"origin_price",type:"number",min:"0",class:"form-control",placeholder:"請輸入原價","onUpdate:modelValue":t[5]||(t[5]=function(e){return l.prodData.origin_price=e})},null,512),[[o["vModelText"],l.prodData.origin_price,void 0,{number:!0}]])]),Object(o["createElementVNode"])("div",I,[J,Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{id:"price",type:"number",min:"0",class:"form-control",placeholder:"請輸入售價","onUpdate:modelValue":t[6]||(t[6]=function(e){return l.prodData.price=e})},null,512),[[o["vModelText"],l.prodData.price,void 0,{number:!0}]])])]),X,Object(o["createElementVNode"])("div",z,[K,Object(o["withDirectives"])(Object(o["createElementVNode"])("textarea",{id:"description",type:"text",class:"form-control",placeholder:"請輸入產品描述","onUpdate:modelValue":t[7]||(t[7]=function(e){return l.prodData.description=e})},"\n                ",512),[[o["vModelText"],l.prodData.description]])]),Object(o["createElementVNode"])("div",Q,[R,Object(o["withDirectives"])(Object(o["createElementVNode"])("textarea",{id:"description",type:"text",class:"form-control",placeholder:"請輸入說明內容","onUpdate:modelValue":t[8]||(t[8]=function(e){return l.prodData.content=e})},"\n                ",512),[[o["vModelText"],l.prodData.content]])]),Object(o["createElementVNode"])("div",Z,[Object(o["createElementVNode"])("div",ee,[Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{id:"is_enabled",class:"form-check-input",type:"checkbox","true-value":1,"false-value":0,"onUpdate:modelValue":t[9]||(t[9]=function(e){return l.prodData.is_enabled=e})},null,512),[[o["vModelCheckbox"],l.prodData.is_enabled]]),te])])])])]),Object(o["createElementVNode"])("div",ae,[oe,Object(o["createElementVNode"])("button",{type:"button",class:"btn btn-primary",onClick:t[10]||(t[10]=function(){return n.updateProd&&n.updateProd.apply(n,arguments)})}," 確認 ")])])])],512)}a("a434");var le=a("e0ae"),ne={data:function(){return{modalDom:"",prodData:{}}},emits:["update"],props:["tmpProd","isNew"],mixins:[le["a"]],watch:{tmpProd:function(){this.prodData=this.tmpProd}},methods:{updateProd:function(){var e,t,a,o=this;f["a"].emit("loading"),this.isNew?(e="post",t="".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("farmerlin731","/admin/product"),a="新增資料"):(e="put",t="".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("farmerlin731","/admin/product/").concat(this.prodData.id),a="更新資料"),this.$http[e](t,{data:this.prodData}).then((function(e){o.hideModal(),o.$emit("update","current"),o.$pushToastMessage(e,"".concat(a))})).catch((function(e){console.dir(e),f["a"].emit("un-loading"),o.$pushToastMessage(e.response,"".concat(a))}))},addPicture:function(){this.prodData.imagesUrl.push("")},delPicture:function(e){this.prodData.imagesUrl.splice(e,1)}},mounted:function(){}},re=a("6b0d"),de=a.n(re);const ie=de()(ne,[["render",ce]]);var se=ie,me=a("6ff1"),pe={data:function(){return{user:{username:"",password:""},products:[],isNew:!1,pages:{},tmpProd:{imagesUrl:[]},fakeData:{category:"測試分類",content:"測試的newwww0209",description:"測試的描述",id:"-Mtg-jieBP4aNqXVFFOU",imageUrl:"https://images.unsplash.com/photo-1583511655857-d19b40a7a54e?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1169&q=80",imagesUrl:["https://images.unsplash.com/photo-1576201836106-db1758fd1c97?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1170&q=80","https://images.unsplash.com/photo-1587300003388-59208cc962cb?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=1950&q=80","https://images.unsplash.com/photo-1517331156700-3c241d2b4d83?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=1948&q=80","https://images.unsplash.com/photo-1581888227599-779811939961?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1074&q=80","https://images.unsplash.com/photo-1502673530728-f79b4cab31b1?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1170&q=80"],is_enabled:1,origin_price:1e3,price:500,title:"0220_fake_data_new",unit:"單位",num:4}}},components:{Pagination:h["a"],ProductModal:se,DelModal:me["a"]},methods:{getData:function(){var e,t=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;f["a"].emit("loading"),"current"==a&&(a=null===(e=this.pages)||void 0===e?void 0:e.current_page);var o="".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("farmerlin731","/admin/products?page=").concat(a);this.$http.get(o).then((function(e){var a;t.products=e.data.products,t.pages=e.data.pagination,t.$pushToastMessage(e,"擷取產品列表第 ".concat(null===(a=t.pages)||void 0===a?void 0:a.current_page," 頁")),f["a"].emit("un-loading")})).catch((function(e){t.$pushToastMessage(e.response,"擷取產品列表"),f["a"].emit("un-loading")}))},openModal:function(e,t){var a=this.$refs.productModal,o=this.$refs.delModal;this.tmpProd=t?Object(u["a"])({imagesUrl:[]},t):{imagesUrl:[]},"add"==e?(this.isNew=!0,a.openModal()):"edit"==e?(this.isNew=!1,a.openModal()):"del"==e&&o.openModal()},delProd:function(){var e=this;f["a"].emit("loading");var t=this.$refs.delModal,a="".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("farmerlin731","/admin/product/").concat(this.tmpProd.id);this.$http.delete(a).then((function(a){var o;t.hideModal(),e.getData(null===(o=e.pages)||void 0===o?void 0:o.current_page),e.$pushToastMessage(a,"刪除")})).catch((function(a){t.hideModal(),f["a"].emit("un-loading"),e.$pushToastMessage(a.response,"刪除")}))}},mounted:function(){this.getData()}};const be=de()(pe,[["render",b]]);t["default"]=be},a434:function(e,t,a){"use strict";var o=a("23e7"),c=a("da84"),l=a("23cb"),n=a("5926"),r=a("07fa"),d=a("7b0b"),i=a("65f0"),s=a("8418"),m=a("1dde"),p=m("splice"),b=c.TypeError,u=Math.max,f=Math.min,h=9007199254740991,j="Maximum allowed length exceeded";o({target:"Array",proto:!0,forced:!p},{splice:function(e,t){var a,o,c,m,p,O,g=d(this),V=r(g),v=l(e,V),N=arguments.length;if(0===N?a=o=0:1===N?(a=0,o=V-v):(a=N-2,o=f(u(n(t),0),V-v)),V+a-o>h)throw b(j);for(c=i(g,o),m=0;m<o;m++)p=v+m,p in g&&s(c,m,g[p]);if(c.length=o,a<o){for(m=v;m<V-o;m++)p=m+o,O=m+a,p in g?g[O]=g[p]:delete g[O];for(m=V;m>V-o+a;m--)delete g[m-1]}else if(a>o)for(m=V-o;m>v;m--)p=m+o-1,O=m+a-1,p in g?g[O]=g[p]:delete g[O];for(m=0;m<a;m++)g[m+v]=arguments[m+2];return g.length=V-o+a,c}})}}]);
//# sourceMappingURL=chunk-067067f3.22cecf70.js.map