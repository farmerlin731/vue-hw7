{"version":3,"sources":["webpack:///./src/views/ProductsBack.vue","webpack:///./src/components/ProductModal.vue","webpack:///./src/components/ProductModal.vue?f7e1","webpack:///./src/views/ProductsBack.vue?2cb7","webpack:///./node_modules/core-js/modules/es.array.splice.js"],"names":["class","style","_createElementVNode","width","_createElementBlock","onClick","$options","_hoisted_4","_Fragment","_renderList","$data","item","key","id","_toDisplayString","category","title","origin_price","price","is_enabled","_hoisted_6","type","_hoisted_8","_hoisted_9","_createVNode","_component_Pagination","pages","onEmitPages","_component_ProductModal","ref","tmpProd","isNew","onUpdate","_component_DelModal","onDelItem","tabindex","aria-labelledby","aria-hidden","data-bs-dismiss","aria-label","for","_hoisted_11","placeholder","imageUrl","$event","src","alt","prodData","imagesUrl","length","_hoisted_14","url","_hoisted_18","_hoisted_21","_hoisted_24","_hoisted_26","unit","_hoisted_29","min","_hoisted_31","_hoisted_32","_hoisted_34","description","_hoisted_36","content","true-value","false-value","_hoisted_39","_hoisted_41","data","modalDom","emits","props","mixins","modalMixin","watch","this","methods","updateProd","method","tmpUrl","msg","emitter","emit","process","$http","then","res","hideModal","$emit","$pushToastMessage","catch","err","console","dir","response","addPicture","push","delPicture","index","splice","mounted","__exports__","user","username","password","products","fakeData","num","components","Pagination","ProductModal","DelModal","getData","page","current_page","api","get","pagination","openModal","prodModalComp","$refs","productModal","delModalComp","delModal","delProd","delete","render","$","global","toAbsoluteIndex","toIntegerOrInfinity","lengthOfArrayLike","toObject","arraySpeciesCreate","createProperty","arrayMethodHasSpeciesSupport","HAS_SPECIES_SUPPORT","TypeError","max","Math","MAX_SAFE_INTEGER","MAXIMUM_ALLOWED_LENGTH_EXCEEDED","target","proto","forced","start","deleteCount","insertCount","actualDeleteCount","A","k","from","to","O","len","actualStart","argumentsLength","arguments"],"mappings":"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","file":"js/chunk-067067f3.22cecf70.js","sourcesContent":["<template>\n  <div class=\"container\" style=\"margin-top: 70px\">\n    <div class=\"text-end\">\n      <button class=\"btn btn-primary\" @click=\"openModal('add')\">\n        建立新的產品\n      </button>\n    </div>\n    <table class=\"table mt-4\">\n      <thead>\n        <tr>\n          <th width=\"120\">分類</th>\n          <th>產品名稱</th>\n          <th width=\"120\">原價</th>\n          <th width=\"120\">售價</th>\n          <th width=\"100\">是否啟用</th>\n          <th width=\"120\">編輯</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr v-for=\"item in products\" :key=\"item.id\">\n          <td>{{ item.category }}</td>\n          <td>{{ item.title }}</td>\n          <td>{{ item.origin_price }}</td>\n          <td>{{ item.price }}</td>\n          <td>\n            <span class=\"text-success\" v-if=\"item.is_enabled\">啟用</span>\n            <span v-else>未啟用</span>\n          </td>\n          <td>\n            <div class=\"btn-group\">\n              <button\n                type=\"button\"\n                class=\"btn btn-outline-primary btn-sm\"\n                @click=\"openModal('edit', item)\"\n              >\n                編輯\n              </button>\n              <button\n                type=\"button\"\n                class=\"btn btn-outline-danger btn-sm\"\n                @click=\"openModal('del', item)\"\n              >\n                刪除\n              </button>\n            </div>\n          </td>\n        </tr>\n      </tbody>\n    </table>\n    <!-- Pagination -->\n    <Pagination :pages=\"pages\" @emit-pages=\"getData\"></Pagination>\n    <ProductModal\n      ref=\"productModal\"\n      :tmpProd=\"tmpProd\"\n      :isNew=\"isNew\"\n      @update=\"getData\"\n    ></ProductModal>\n    <DelModal ref=\"delModal\" :tmpProd=\"tmpProd\" @del-item=\"delProd\"></DelModal>\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n</style>\n\n<script>\nimport emitter from \"@/methods/mitt\";\nimport Pagination from \"@/components/Pagination.vue\";\nimport ProductModal from \"@/components/ProductModal.vue\";\nimport DelModal from \"@/components/DelModal.vue\";\nexport default {\n  data() {\n    return {\n      user: {\n        username: \"\",\n        password: \"\",\n      },\n      products: [],\n      isNew: false,\n      pages: {},\n      tmpProd: { imagesUrl: [] },\n      //-- test data --\n      fakeData: {\n        category: \"測試分類\",\n        content: \"測試的newwww0209\",\n        description: \"測試的描述\",\n        id: \"-Mtg-jieBP4aNqXVFFOU\",\n        imageUrl:\n          \"https://images.unsplash.com/photo-1583511655857-d19b40a7a54e?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1169&q=80\",\n        imagesUrl: [\n          \"https://images.unsplash.com/photo-1576201836106-db1758fd1c97?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1170&q=80\",\n          \"https://images.unsplash.com/photo-1587300003388-59208cc962cb?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=1950&q=80\",\n          \"https://images.unsplash.com/photo-1517331156700-3c241d2b4d83?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=1948&q=80\",\n          \"https://images.unsplash.com/photo-1581888227599-779811939961?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1074&q=80\",\n          \"https://images.unsplash.com/photo-1502673530728-f79b4cab31b1?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1170&q=80\",\n        ],\n        is_enabled: 1,\n        origin_price: 1000,\n        price: 500,\n        title: \"0220_fake_data_new\",\n        unit: \"單位\",\n        num: 4,\n      },\n    };\n  },\n  components: {\n    Pagination,\n    ProductModal,\n    DelModal,\n  },\n  methods: {\n    getData(page = 1) {\n      emitter.emit(\"loading\");\n      if (page == \"current\") page = this.pages?.current_page; // emit of update\n\n      const api = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/admin/products?page=${page}`;\n      this.$http\n        .get(api)\n        .then((res) => {\n          this.products = res.data.products;\n          this.pages = res.data.pagination;\n          this.$pushToastMessage(\n            res,\n            `擷取產品列表第 ${this.pages?.current_page} 頁`\n          );\n          emitter.emit(\"un-loading\");\n        })\n        .catch((err) => {\n          this.$pushToastMessage(err.response, \"擷取產品列表\");\n          emitter.emit(\"un-loading\");\n        });\n    },\n\n    openModal(type, item) {\n      const prodModalComp = this.$refs.productModal;\n      const delModalComp = this.$refs.delModal;\n      // this.tmpProd = item ? { ...item } : { ...this.fakeData };\n      this.tmpProd = item ? { imagesUrl: [], ...item } : { imagesUrl: [] };\n\n      if (type == \"add\") {\n        this.isNew = true;\n        prodModalComp.openModal();\n      } else if (type == \"edit\") {\n        this.isNew = false;\n        prodModalComp.openModal();\n      } else if (type == \"del\") {\n        delModalComp.openModal();\n      }\n    },\n\n    delProd() {\n      emitter.emit(\"loading\");\n      const delModalComp = this.$refs.delModal;\n      const api = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/admin/product/${this.tmpProd.id}`;\n      this.$http\n        .delete(api)\n        .then((res) => {\n          delModalComp.hideModal();\n          this.getData(this.pages?.current_page);\n          this.$pushToastMessage(res, \"刪除\");\n        })\n        .catch((err) => {\n          delModalComp.hideModal();\n          emitter.emit(\"un-loading\");\n          this.$pushToastMessage(err.response, \"刪除\");\n        });\n    },\n  },\n  mounted() {\n    this.getData();\n  },\n};\n</script>\n","<template>\n  <div\n    id=\"productModal\"\n    ref=\"modal\"\n    class=\"modal fade\"\n    tabindex=\"-1\"\n    aria-labelledby=\"productModalLabel\"\n    aria-hidden=\"true\"\n  >\n    <div class=\"modal-dialog modal-xl\">\n      <div class=\"modal-content border-0\">\n        <div class=\"modal-header bg-dark text-white\">\n          <h5 id=\"productModalLabel\" class=\"modal-title\">\n            <span>新增產品</span>\n          </h5>\n          <button\n            type=\"button\"\n            class=\"btn-close\"\n            data-bs-dismiss=\"modal\"\n            aria-label=\"Close\"\n          ></button>\n        </div>\n        <div class=\"modal-body\">\n          <div class=\"row\">\n            <div class=\"col-sm-4\">\n              <div class=\"mb-5\">\n                <h5>主要圖片</h5>\n                <div class=\"mb-3\">\n                  <label for=\"imageUrl\" class=\"form-label\">圖片網址：</label>\n                  <input\n                    type=\"text\"\n                    class=\"form-control\"\n                    placeholder=\"請輸入圖片連結\"\n                    v-model=\"prodData.imageUrl\"\n                  />\n                  <img :src=\"prodData.imageUrl\" class=\"img-fluid\" alt=\"\" />\n                </div>\n              </div>\n\n              <div v-if=\"prodData.imagesUrl?.length != 0\" class=\"mb-2\">\n                <h5>附加圖片</h5>\n                <div\n                  class=\"mb-5\"\n                  v-for=\"(url, key) in prodData.imagesUrl\"\n                  :key=\"key\"\n                >\n                  <label for=\"imageUrl\" class=\"form-label\"\n                    >附圖 {{ key + 1 }} - 圖片網址：</label\n                  >\n                  <input\n                    type=\"text\"\n                    class=\"form-control\"\n                    placeholder=\"請輸入圖片連結\"\n                    v-model=\"prodData.imagesUrl[key]\"\n                  />\n                  <img\n                    :src=\"prodData.imagesUrl[key]\"\n                    class=\"img-fluid\"\n                    style=\"margin: 5px 0px\"\n                    alt=\"\"\n                  />\n                  <button\n                    class=\"btn btn-outline-danger btn-sm d-block w-100\"\n                    @click=\"delPicture(key)\"\n                  >\n                    刪除此張附圖\n                  </button>\n                </div>\n              </div>\n\n              <div>\n                <button\n                  class=\"btn btn-outline-primary btn-sm d-block w-100\"\n                  @click=\"addPicture\"\n                >\n                  新增附圖\n                </button>\n              </div>\n            </div>\n            <div class=\"col-sm-8\">\n              <div class=\"mb-3\">\n                <label for=\"title\" class=\"form-label\">標題</label>\n                <input\n                  id=\"title\"\n                  type=\"text\"\n                  class=\"form-control\"\n                  placeholder=\"請輸入標題\"\n                  v-model=\"prodData.title\"\n                />\n              </div>\n\n              <div class=\"row\">\n                <div class=\"mb-3 col-md-6\">\n                  <label for=\"category\" class=\"form-label\">分類</label>\n                  <input\n                    id=\"category\"\n                    type=\"text\"\n                    class=\"form-control\"\n                    placeholder=\"請輸入分類\"\n                    v-model=\"prodData.category\"\n                  />\n                </div>\n                <div class=\"mb-3 col-md-6\">\n                  <label for=\"price\" class=\"form-label\">單位</label>\n                  <input\n                    id=\"unit\"\n                    type=\"text\"\n                    class=\"form-control\"\n                    placeholder=\"請輸入單位\"\n                    v-model=\"prodData.unit\"\n                  />\n                </div>\n              </div>\n\n              <div class=\"row\">\n                <div class=\"mb-3 col-md-6\">\n                  <label for=\"origin_price\" class=\"form-label\">原價</label>\n                  <input\n                    id=\"origin_price\"\n                    type=\"number\"\n                    min=\"0\"\n                    class=\"form-control\"\n                    placeholder=\"請輸入原價\"\n                    v-model.number=\"prodData.origin_price\"\n                  />\n                </div>\n                <div class=\"mb-3 col-md-6\">\n                  <label for=\"price\" class=\"form-label\">售價</label>\n                  <input\n                    id=\"price\"\n                    type=\"number\"\n                    min=\"0\"\n                    class=\"form-control\"\n                    placeholder=\"請輸入售價\"\n                    v-model.number=\"prodData.price\"\n                  />\n                </div>\n              </div>\n              <hr />\n\n              <div class=\"mb-3\">\n                <label for=\"description\" class=\"form-label\">產品描述</label>\n                <textarea\n                  id=\"description\"\n                  type=\"text\"\n                  class=\"form-control\"\n                  placeholder=\"請輸入產品描述\"\n                  v-model=\"prodData.description\"\n                >\n                </textarea>\n              </div>\n              <div class=\"mb-3\">\n                <label for=\"content\" class=\"form-label\">說明內容</label>\n                <textarea\n                  id=\"description\"\n                  type=\"text\"\n                  class=\"form-control\"\n                  placeholder=\"請輸入說明內容\"\n                  v-model=\"prodData.content\"\n                >\n                </textarea>\n              </div>\n              <div class=\"mb-3\">\n                <div class=\"form-check\">\n                  <input\n                    id=\"is_enabled\"\n                    class=\"form-check-input\"\n                    type=\"checkbox\"\n                    :true-value=\"1\"\n                    :false-value=\"0\"\n                    v-model=\"prodData.is_enabled\"\n                  />\n                  <label class=\"form-check-label\" for=\"is_enabled\"\n                    >是否啟用</label\n                  >\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n        <div class=\"modal-footer\">\n          <button\n            type=\"button\"\n            class=\"btn btn-outline-secondary\"\n            data-bs-dismiss=\"modal\"\n          >\n            取消\n          </button>\n          <button type=\"button\" class=\"btn btn-primary\" @click=\"updateProd\">\n            確認\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n</style>\n\n\n<script>\n// import Modal from \"bootstrap/js/dist/modal\";\nimport modalMixin from \"@/mixins/modalMixin.js\";\nimport emitter from \"@/methods/mitt\";\n\nexport default {\n  data() {\n    return {\n      modalDom: \"\",\n      prodData: {},\n    };\n  },\n  emits: [\"update\"],\n  props: [\"tmpProd\", \"isNew\"],\n  mixins: [modalMixin],\n  watch: {\n    tmpProd() {\n      this.prodData = this.tmpProd;\n    },\n  },\n  methods: {\n    updateProd() {\n      emitter.emit(\"loading\");\n\n      let method, tmpUrl, msg;\n      if (this.isNew) {\n        method = \"post\";\n        tmpUrl = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/admin/product`;\n        msg = \"新增資料\";\n      } else {\n        method = \"put\";\n        tmpUrl = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/admin/product/${this.prodData.id}`;\n        msg = \"更新資料\";\n      }\n\n      this.$http[method](tmpUrl, { data: this.prodData })\n        .then((res) => {\n          this.hideModal();\n          this.$emit(\"update\", \"current\");\n          this.$pushToastMessage(res, `${msg}`);\n        })\n        .catch((err) => {\n          console.dir(err);\n          emitter.emit(\"un-loading\");\n          this.$pushToastMessage(err.response, `${msg}`);\n        });\n    },\n    addPicture() {\n      this.prodData.imagesUrl.push(\"\");\n    },\n    delPicture(index) {\n      this.prodData.imagesUrl.splice(index, 1);\n    },\n    // openModal() {\n    //   this.modalDom.show();\n    // },\n    // hideModal() {\n    //   this.modalDom.hide();\n    // },\n  },\n  mounted() {\n    // console.log(`in mounted session!!`);\n    // this.modalDom = new Modal(this.$refs.modal);\n  },\n};\n</script>","import { render } from \"./ProductModal.vue?vue&type=template&id=08ed3a95\"\nimport script from \"./ProductModal.vue?vue&type=script&lang=js\"\nexport * from \"./ProductModal.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/yuchiehlin/vue-hex-week7/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./ProductsBack.vue?vue&type=template&id=37c277a2\"\nimport script from \"./ProductsBack.vue?vue&type=script&lang=js\"\nexport * from \"./ProductsBack.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/yuchiehlin/vue-hex-week7/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","'use strict';\nvar $ = require('../internals/export');\nvar global = require('../internals/global');\nvar toAbsoluteIndex = require('../internals/to-absolute-index');\nvar toIntegerOrInfinity = require('../internals/to-integer-or-infinity');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar toObject = require('../internals/to-object');\nvar arraySpeciesCreate = require('../internals/array-species-create');\nvar createProperty = require('../internals/create-property');\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('splice');\n\nvar TypeError = global.TypeError;\nvar max = Math.max;\nvar min = Math.min;\nvar MAX_SAFE_INTEGER = 0x1FFFFFFFFFFFFF;\nvar MAXIMUM_ALLOWED_LENGTH_EXCEEDED = 'Maximum allowed length exceeded';\n\n// `Array.prototype.splice` method\n// https://tc39.es/ecma262/#sec-array.prototype.splice\n// with adding support of @@species\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT }, {\n  splice: function splice(start, deleteCount /* , ...items */) {\n    var O = toObject(this);\n    var len = lengthOfArrayLike(O);\n    var actualStart = toAbsoluteIndex(start, len);\n    var argumentsLength = arguments.length;\n    var insertCount, actualDeleteCount, A, k, from, to;\n    if (argumentsLength === 0) {\n      insertCount = actualDeleteCount = 0;\n    } else if (argumentsLength === 1) {\n      insertCount = 0;\n      actualDeleteCount = len - actualStart;\n    } else {\n      insertCount = argumentsLength - 2;\n      actualDeleteCount = min(max(toIntegerOrInfinity(deleteCount), 0), len - actualStart);\n    }\n    if (len + insertCount - actualDeleteCount > MAX_SAFE_INTEGER) {\n      throw TypeError(MAXIMUM_ALLOWED_LENGTH_EXCEEDED);\n    }\n    A = arraySpeciesCreate(O, actualDeleteCount);\n    for (k = 0; k < actualDeleteCount; k++) {\n      from = actualStart + k;\n      if (from in O) createProperty(A, k, O[from]);\n    }\n    A.length = actualDeleteCount;\n    if (insertCount < actualDeleteCount) {\n      for (k = actualStart; k < len - actualDeleteCount; k++) {\n        from = k + actualDeleteCount;\n        to = k + insertCount;\n        if (from in O) O[to] = O[from];\n        else delete O[to];\n      }\n      for (k = len; k > len - actualDeleteCount + insertCount; k--) delete O[k - 1];\n    } else if (insertCount > actualDeleteCount) {\n      for (k = len - actualDeleteCount; k > actualStart; k--) {\n        from = k + actualDeleteCount - 1;\n        to = k + insertCount - 1;\n        if (from in O) O[to] = O[from];\n        else delete O[to];\n      }\n    }\n    for (k = 0; k < insertCount; k++) {\n      O[k + actualStart] = arguments[k + 2];\n    }\n    O.length = len - actualDeleteCount + insertCount;\n    return A;\n  }\n});\n"],"sourceRoot":""}